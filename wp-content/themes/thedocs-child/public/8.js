webpackJsonp([8],{11:function(e,t,n){"use strict";(function(e){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(34),o=function(){function t(){a(this,t)}return i(t,[{key:"init",value:function(){var t=this;document.querySelector("#modal_new-assignment .send-btn").addEventListener("click",function(n){var a=e("#cohort").val(),i=e("#atemplate-select").val(),s=e("#duedate").val();t.createAsignment(a,s,i)});var n=document.querySelector(".btn-success");n&&n.addEventListener("click",function(n){var a={action:"get_assignment_earnings",slug:n.target.getAttribute("data-slug")};document.querySelector("#assignment-id").value=n.target.getAttribute("data-assignment"),document.querySelector("#student-name").value=n.target.getAttribute("data-student"),e.ajax({url:WPAS_APP.ajax_url,data:a,success:function(e){if(500==e.code)s.BCMessaging.notify(s.BCMessaging.ERROR,e.msg);else{var n=e.data,a=t.printProjectEarnings(n);document.querySelector(".project-earnings").innerHTML=a,document.querySelector("#assignment-title").value=n.title}}})}),document.querySelector("#modal-accept_assignment .send-btn").addEventListener("click",function(e){var n=document.querySelector("#assignment-id").value,a=document.querySelectorAll("input[name*='badge']"),i={};a.forEach(function(e){i[e.getAttribute("data-key")]=e.value}),t.acceptAsignment(i,n)})}},{key:"send",value:function(t){var n={action:"deliver_project",assignment:t};return e.ajax({url:WPAS_APP.ajax_url,method:"post",dataType:"json",data:n,success:function(e){e?"200"==e.code?window.location.reload():s.BCMessaging.notify(s.BCMessaging.ERROR,e.msg):s.BCMessaging.notify(s.BCMessaging.ERROR,"The was an unexpected error")}}),!1}},{key:"createAsignment",value:function(t,n,a){var i={action:"create_new_assignment",cohort_id:t,duedate:n,template_id:a};return e.ajax({url:WPAS_APP.ajax_url,method:"post",dataType:"json",data:i,success:function(e){e?"200"==e.code?window.location.reload():s.BCMessaging.notify(s.BCMessaging.ERROR,e.msg):s.BCMessaging.notify(s.BCMessaging.ERROR,"The was an unexpected error")}}),!1}},{key:"acceptAsignment",value:function(t,n){var a={action:"accept_assignment",assignment_id:n,points:t};return e.ajax({url:WPAS_APP.ajax_url,method:"post",dataType:"json",data:a,success:function(e){console.log(e),e?"200"==e.code?window.location.reload():s.BCMessaging.notify(s.BCMessaging.ERROR,e.msg):s.BCMessaging.notify(s.BCMessaging.ERROR,"The was an unexpected error")}}),!1}},{key:"printProjectEarnings",value:function(e){var t="";return e.talents.forEach(function(e){t+='<div class="input-group">\n\t\t\t\t            <span class="input-group-addon">'+e.badge+"</span>\n\t\t\t\t\t\t    <input max='"+e.points+"' min='0' data-key=\""+e.badge+'" class="form-control talent-input" required="required" type="number" name=\'badge[]\' value=\''+e.points+"'>\n\t\t\t\t        </div>"}),t}}]),t}();t.default=o}).call(t,n(0))},34:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BCMessaging=function(){function e(e,a){o||n(e),t(a)}function t(e){var t=document.createElement("div");t.classList.add("single-notification"),t.innerHTML=i()(e.type,e.message),o.appendChild(t);for(var n=t.childNodes,s=0;s<n.length;s++)if("close"==n[s].className){n[s].addEventListener("click",function(){o.removeChild(t)});break}setTimeout(function(){t.classList.add("about-to-close"),setTimeout(function(){o.removeChild(t),0==o.childNodes.length&&a()},500)},3e3)}function n(e){o=document.createElement("div"),o.classList.add("bcnotification"),o.classList.add(e+"-notification"),document.body.appendChild(o)}function a(){o&&(o.parentNode.removeChild(o),o=null)}function i(){return function(e,t){return'<div class="inner-message alert alert-'+e+'">\n                                    <button type="button" class="close" data-dismiss="alert">&times;</button>\n                                    '+t+"\n                                </div>"}}var s={};s.ERROR="danger",s.WARNING="warning",s.SUCCESS="success";var o=null,r=[];return s.addMessage=function(e,t){void 0===r[e]&&(r[e]=[]),r[e].push(t)},s.getMessages=function(e){return void 0===r[e]&&(r[e]=[]),r[e]},s.notify=function(t,n){e("top",{type:t,message:n})},s.notifyPending=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a="<ul>";n?n.forEach(function(e){a+="<li>"+e+"</li>"}):r[t].forEach(function(e){a+="<li>"+e+"</li>"}),a+="</ul>",r[t]=[],e("top",{type:t,message:a})},s}()}});